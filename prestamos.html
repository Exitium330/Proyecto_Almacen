<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo de Préstamos</title>
    <link rel="stylesheet" href="/Css/prestamos.css">
    
</head>
<body>
    <div class="container">
        <h2>Registrar Préstamo</h2>
        <input type="text" id="busqueda" placeholder="Buscar por instructor" onkeyup="filtrarPrestamos()">
        <label for="articulo">Artículo:</label>
        <select id="articulo">
            <option value="Portátil HP">Portátil HP</option>
            <option value="Tablet Samsung">Tablet Samsung</option>
            <option value="Proyector Epson">Proyector Epson</option>
        </select>
        
        <label for="cantidad">Cantidad:</label>
        <input type="number" id="cantidad" placeholder="Cantidad">
        
        <label for="instructor">Instructor:</label>
        <input type="text" id="instructor" placeholder="Nombre del instructor">
        
        <label for="ambiente">Ambiente:</label>
        <input type="text" id="ambiente" placeholder="Número del ambiente">
        
        <button onclick="registrarPrestamo()">Realizar Préstamo</button>
        
        <h3>Préstamos Activos</h3>
        <div id="prestamos"></div>
    </div>

    <script>
        let prestamos = [];

        function registrarPrestamo() {
            let articulo = document.getElementById('articulo').value;
            let cantidad = document.getElementById('cantidad').value;
            let instructor = document.getElementById('instructor').value;
            let ambiente = document.getElementById('ambiente').value;
            let fechaHora = new Date().toLocaleString();
            let estado = "Pendiente";
            
            if (articulo && cantidad && instructor && ambiente) {
                let nuevoPrestamo = { articulo, cantidad, instructor, ambiente, fechaHora, estado };
                prestamos.push(nuevoPrestamo);
                mostrarPrestamos();
                
                document.getElementById('cantidad').value = '';
                document.getElementById('instructor').value = '';
                document.getElementById('ambiente').value = '';
            }
        }

        function mostrarPrestamos(filtrados = null) {
            let contenedor = document.getElementById('prestamos');
            contenedor.innerHTML = '';
            let lista = filtrados || prestamos;
            lista.forEach((prestamo, index) => {
                contenedor.innerHTML += `
                    <div class="prestamo">
                        <p><strong>Artículo:</strong> ${prestamo.articulo}</p>
                        <p><strong>Cantidad:</strong> ${prestamo.cantidad}</p>
                        <p><strong>Instructor:</strong> ${prestamo.instructor}</p>
                        <p><strong>Ambiente:</strong> ${prestamo.ambiente}</p>
                        <p><strong>Fecha y Hora:</strong> ${prestamo.fechaHora}</p>
                        <p><strong>Estado:</strong> ${prestamo.estado}</p>
                        <button onclick="marcarDevuelto(${index})">Marcar como Devuelto</button>
                        <button onclick="eliminarPrestamo(${index})" style="background-color: red;">Eliminar</button>
                    </div>
                `;
            });
        }

        function marcarDevuelto(index) {
            prestamos[index].estado = "Devuelto";
            mostrarPrestamos();
        }

        function eliminarPrestamo(index) {
            prestamos.splice(index, 1);
            mostrarPrestamos();
        }

        function filtrarPrestamos() {
            let filtro = document.getElementById('busqueda').value.toLowerCase();
            let prestamosFiltrados = prestamos.filter(p => p.instructor.toLowerCase().includes(filtro));
            mostrarPrestamos(prestamosFiltrados);
        }
    </script>
</body>
</html>

